<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Thirteen</title>

    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style>
		span.loginNick {
			font-weight: bold;
			color: #00a0e8;
		}

		.main-page-image {
			padding: 2px;
		}

		.thumbnail > img {
			max-height: 400px;
		}

		@media(min-width: 1100px) {
			.search-box {
				width: 500px !important;
			}
		}
		@media(max-width: 1100px) {
			.search-box {

			}
		}
    </style>
  </head>
  <body>
	<!-- navigation top bar -->
	<nav class="navbar navbar-default" role="navigation">
	  <div class="container-fluid">
	    <!-- Brand and toggle get grouped for better mobile display -->
	    <div class="navbar-header">
	      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
	        <span class="sr-only">Toggle navigation</span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	      </button>
	      <a class="navbar-brand" href="#">Thirteen</a>
	    </div>
	    <!-- Collect the nav links, forms, and other content for toggling -->
	    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	      <ul class="nav navbar-nav">
	  		<li class="active"><a href="/">Home</a></li>      
	      </ul>
	      <ul class="nav navbar-nav navbar-right logged-out">
	        <li><a href="/users/auth">Sign in</a></li>
	        <li><a href="/users/register">Register</a></li>
	      </ul>
	      <ul class="nav navbar-nav navbar-right logged-in">
	        <li class="dropdown">
	          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Logged on as <span id="auth-nick">%username%</span> <span class="caret"></span></a>
	          <ul class="dropdown-menu" role="menu">
	            <li><a id="profile-go" href="#">Profile</a></li>
	            <li><a id="profile-logout" href="#">Sign out</a></li>
	          </ul>
	        </li>
	      </ul>
	      <form class="navbar-form navbar-right" role="search" style="margin-right: 15px;">
	        <div class="input-group">
		      <input type="text" class="form-control search-box">
		      <span class="input-group-btn">
		        <button class="btn btn-default" type="button">Search</button>
		      </span>
		    </div><!-- /input-group -->
	      </form>
	    </div><!-- /.navbar-collapse -->
	  </div><!-- /.container-fluid -->
	</nav>

	<div class="container">
		<div class="row">
			<div class="col-xs-6 col-md-3 main-page-image">
				<img class="img-responsive" id="slide1-1" src="css/placeholder.png">
				<img class="img-responsive" id="slide1-2" src="css/placeholder.png" style="display: none;">
			</div>
			<div class="col-xs-6 col-md-3 main-page-image">
				<img class="img-responsive" id="slide2-1" src="css/placeholder.png">
				<img class="img-responsive" id="slide2-2" src="css/placeholder.png" style="display: none;">
			</div>
			<div class="col-xs-6 col-md-3 main-page-image">
				<img class="img-responsive" id="slide3-1" src="css/placeholder.png">
				<img class="img-responsive" id="slide3-2" src="css/placeholder.png" style="display: none;">
			</div>
			<div class="col-xs-6 col-md-3 main-page-image">
				<img class="img-responsive" id="slide4-1" src="css/placeholder.png">
				<img class="img-responsive" id="slide4-2" src="css/placeholder.png" style="display: none;">
			</div>
			<div class="col-xs-6 col-md-3 main-page-image">
				<img class="img-responsive" id="slide5-1" src="css/placeholder.png">
				<img class="img-responsive" id="slide5-2" src="css/placeholder.png" style="display: none;">
			</div>
			<div class="col-xs-6 col-md-3 main-page-image">
				<img class="img-responsive" id="slide6-1" src="css/placeholder.png">
				<img class="img-responsive" id="slide6-2" src="css/placeholder.png" style="display: none;">
			</div>
			<div class="col-xs-6 col-md-3 main-page-image">
				<img class="img-responsive" id="slide7-1" src="css/placeholder.png">
				<img class="img-responsive" id="slide7-2" src="css/placeholder.png" style="display: none;">
			</div>
			<div class="col-xs-6 col-md-3 main-page-image">
				<img class="img-responsive" id="slide8-1" src="css/placeholder.png">
				<img class="img-responsive" id="slide8-2" src="css/placeholder.png" style="display: none;">
			</div>	
		</div>
	</div>


    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
	<script src="/js/cookie.js"></script>
	<script>
		var slider = function (first, second) {
			first.fadeOut();
			setTimeout(function() {
				second.fadeIn();
			}, 500);
		};

		var init = function(data) {
			if (!data) data = {};
			if (typeof(data) == 'string' && data !== '') data = JSON.parse(data);	

			var session = $.cookie('sessionkey');
			var userid = $.cookie('userid');

			if (!session) {
				$('.logged-out').removeClass('hidden');
				$('.logged-in').addClass('hidden');
				$("#auth-form").fadeIn();
				if (data.email) $("#auth-name").text(data.email);
			} else {
				$.getJSON('/api/users/profile/' + userid, function(data) {
					$("#auth-nick").text(data.nick);
				}).fail(function() {
					$.get('/api/users/logout', init);
				});
				$('.logged-in').removeClass('hidden');
				$('.logged-out').addClass('hidden');
			}
		};

		$(function() {
			init();

			$("#profile-logout").on('click', function() {
				$.get('/api/users/logout', init);
			});

			//while (true) {
				slider($("#slide1-1"), $("#slide1-2"));
				setTimeout (function(){
					slider($("#slide7-1"), $("#slide7-2"));
					setTimeout (function(){
						slider($("#slide5-1"), $("#slide5-2"));
						setTimeout (function(){
							slider($("#slide3-1"), $("#slide3-2"));
							setTimeout (function(){
								slider($("#slide8-1"), $("#slide8-2"));
								setTimeout (function(){
									slider($("#slide2-1"), $("#slide2-2"));
									setTimeout (function(){
										slider($("#slide6-1"), $("#slide6-2"));
										setTimeout (function(){
											slider($("#slide4-1"), $("#slide4-2"));
											// sliding back
											setTimeout (function(){
												slider($("#slide3-2"), $("#slide3-1"));
												setTimeout (function(){
													slider($("#slide5-2"), $("#slide5-1"));
													setTimeout (function(){
														slider($("#slide8-2"), $("#slide8-1"));
														setTimeout (function(){
															slider($("#slide1-2"), $("#slide1-1"));
															setTimeout (function(){
																slider($("#slide4-2"), $("#slide4-1"));
																setTimeout (function(){
																	slider($("#slide7-2"), $("#slide7-1"));
																	setTimeout (function(){
																		slider($("#slide6-2"), $("#slide6-1"));
																		setTimeout (function(){
																			slider($("#slide2-2"), $("#slide2-1"));
																		}, 7000);
																	}, 7000);
																}, 7000);
															}, 7000);
														}, 7000);
													}, 7000);
												}, 7000);
											}, 7000);
										}, 7000);
									}, 7000);
								}, 7000);
							}, 7000);
						}, 7000);
					}, 7000);
				}, 7000);
			//}
		});
	</script>
  </body>
</html>